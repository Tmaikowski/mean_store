<h1>Orders</h1>

<div ng-controller="CustomersController as CC" ng-init="CC.index()">
  <h3>Add a new order</h3>
  <form ng-controller="ProductsController as PC" ng-init="PC.index()" ng-submit="OC.create(newOrder)">
    Customer: <select ng-model="newOrder.customerId">
      <option ng-repeat="customer in CC.customers" value="{{customer._id}}">{{ customer.name }}</option>
    </select><br>
    Order: <input type="number" ng-model="newOrder.productQuantity">
    <select ng-model="newOrder.productId">
      <option ng-repeat="product in PC.products" value="{{product._id}}">{{ product.name }}</option>
    </select>
    <input type="submit" value="Order">
  </form>
<div><br><hr>
<input type="text" placeholder="Filter..." ng-model="orderFilter"><br><br>
<table ng-init="OC.index()">
  <thead>
    <tr>
      <th>Customer Name</th>
      <th>Product</th>
      <th>Quantity</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="order in OC.orders | filter:orderFilter ">
      <td>{{ order.customerName }}</td>
      <td>{{ order.productName }}</td>
      <td>{{ order.productQuantity }}</td>
      <td>{{ order.createdAt | date:'MM-dd-yyyy' }}</td>
    </tr>
  </tbody>
</table>
